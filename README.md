# zwSqliteTest
基于springboot +Sqlite

虽然项目中实现了读写分离,但是读写分离并不适合sqlite数据库,读写分离只会造成锁库报错问题,生产单连接+wal就可以了,现在已经将读写分离的注解给注释了,不再是多数据源了


	/**多线程并发写入数据时,经常会出现SQLITE_BUSY The database file is locked,不支持并发写入,
	 * 这里为什么要用多线模拟,因为业务层很多时候都会用到多线程,主要是模拟生产环境,其实这些线程在写入的时候都被阻塞了,因为用的就是一个连接
	 * Cause: org.sqlite.SQLiteException: [SQLITE_BUSY]  The database file is locked (database is locked)
	 * @throws InterruptedException
	 *
	 * dell i5 32g内存 g3 笔记本固态下测试
	 * 执行1000条数据总耗时 7445毫秒 每条记录大概7,8毫秒,tps大概是135
	 * 执行10000条数据总耗时 :80214毫秒 每条记录大概8毫秒,tps大概是125
	 * 执行100000条数据总耗时 :80214毫秒 每条记录大概8毫秒,tps大概是125
	 * 执行100000条数据总耗时 :780002毫秒 每条记录大概7.8毫秒,tps大概是128
	 * 注意在死循环极限写入下,并发进行读取没有开启wal模式测试
	 * 随机读主键操作执行完1000个记录耗时:2541.0毫秒, 每条记录大概需要2.54毫秒,qps大概:393.55
	 * 注意在死循环极限写入下,并发进行读取开启wal模式测试
	 *随机读主键操作执行完1000个记录耗时:513.0毫秒, 每条记录大概需要0.51毫秒,qps大概:1949.32 ,读性能直接提升4倍多
	 *
	 * 神舟战神i7+16g内存机械盘测试
	 * 写操作执行完1000个记录耗时:105412.0毫秒, 每条记录大概需要105.41毫秒,tps大概:9.49
	 * 神舟战神i7+16g内存固态测试
	 * 写操作执行完1000个记录耗时:8045.0毫秒, 每条记录大概需要8.04毫秒,tps大概:124.3
	 * 写操作执行完10000个记录耗时:83783.0毫秒, 每条记录大概需要8.38毫秒,tps大概:119.36
	 */
